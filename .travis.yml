language: go
sudo: false

go:
  - 1.21.x

before_script:
  - curl https://qlty.sh | sh
  - qlty coverage publish cover.out

script:
  - make test
  - go test -coverprofile c.out ./...

after_script:
  - ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT
